<%- include('partials/header') %>

<style>
  body {
    background-image: url("/images/<%= meetup._id %>");
    background-size: cover;
    color: white;
  }
</style>

<div class="overlay"></div>

<div class="container">
  <div class="py-5 text-center">
    <h1>Edit Event</h1>
    <h3 class="text-danger"><strong><%= message %></strong></h3>
  </div>

  <div class="row">
    <div class="col-md-8 order-md-1">
      <h3 className="d-flex justify-content-between align-items-center mb-3">
        Event Details
      </h3>

      <form id="meetup-edit" action="/events/<%=meetup._id%>" method="POST" class="needs-validation" novalidate>
        <div class="mb-3">

          <input type="text" name="name" value="<%=meetup.name%>" class="form-control meet-details"
            placeholder="Event Name" form="meetup-edit" required>
          <div class="invalid-feedback">
            Valid event name is required.
          </div>
        </div>

        <div class="mb-3">
          <textarea type="text" name="desc" class="meet-details" placeholder=" Description" rows="2" form="meetup-edit"
            style="width: 100%; padding:10px;"><%= meetup.desc %></textarea>
        </div>

        <!-- Where and When -->
        <div class="mb-3">
          <label for="location">Where?</label>
          <input type="text" name="location" class="form-control meet-details" placeholder="1234 Main St"
            form="meetup-edit" value="<%= meetup.location %>">
        </div>

        <div class="mb-3">
          <label for="address2">When?</label>
          <input type="text" class="form-control meet-details" name="time" placeholder="March 14 from noon to whenever"
            form="meetup-edit" value="<%= meetup.time %>">
        </div>

        <hr class="mb-3">
        <button class="btn btn-primary btn-block mb-2" type="submit" form="meetup-edit">Save Changes</button>
      </form>

      <hr class="mb-3">

      <!-- Background Image -->
      <form id="upload-form" action="/events/<%=meetup._id%>/image" method="post" enctype="multipart/form-data">
        <div class="input-group mb-3">
          <div class="custom-file">
            <input type="file" name="meetupImage" id="meetupImageInput" class="custom-file-input" accept="image/*">
            <label for="meetupImageInput" class="custom-file-label">Upload an Image</label>

          </div>
          <div class="input-group-append">
            <button id="imageUploadBtn" class="btn btn-primary" type="submit" disabled>Upload</button>
          </div>
        </div>
      </form>

    </div>



    <!-- Guest List -->
    <div class="col-md-4 order-md-2 mb-4">
      <div id="guest-list"></div>
    </div>

  </div>
</div>

<%- include('partials/scripts') %>
<!-- de-activates "upload" button before an image is selected -->
<!-- de-activates "browse" if there are unsaved changes -->
<script src="/js/edit.js" type="text/javascript"> </script>


<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<script src="/js/guest-list.js" type="text/jsx" id="guest-list-script" 
  meetup-id=<%= meetup._id %> > 
</script> 

<!-- <script src="guest-list-2.js" type="text/javascript" id="guest-list-script" meetup-id=<%= meetup._id %> > </script> -->

<%- include('partials/footer') %>