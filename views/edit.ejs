<%- include('partials/header') %>

<style>
  body {
    background-image: url("/images/<%= meetup.image %>");
    background-size: cover;
  }
</style>



<div class="container">
  <div class="py-5 text-center">
    <h1>Edit Event</h1>
    <h3 class="text-danger"><strong><%= message %></strong></h3>
  </div>

  <div class="row">
    <div class="col-md-8 order-md-1">

      <form id="meetup-edit" action="/edit" method="POST" class="needs-validation" novalidate>
        <div class="mb-3">
          <input type="text" name="name" value="<%=meetup.name%>" class="form-control meet-details"
            placeholder="Event Name" form="meetup-edit" required>
          <div class="invalid-feedback">
            Valid event name is required.
          </div>
        </div>

        <div class="mb-3">
          <textarea type="text" name="desc" class="meet-details" placeholder=" Description" rows="2" form="meetup-edit"
            style="width: 100%; padding:10px;"><%= meetup.desc %></textarea>
        </div>
        <hr>

        <!-- Where and When -->
        <div class="mb-3">
          <label for="location">Where?</label>
          <input type="text" name="location" class="form-control meet-details" placeholder="1234 Main St"
            form="meetup-edit" value="<%= meetup.location %>">
        </div>

        <div class="mb-3">
          <label for="address2">When?</label>
          <input type="text" class="form-control meet-details" name="time" placeholder="March 14 from noon to whenever"
            form="meetup-edit" value="<%= meetup.time %>">
        </div>

        <hr class="mb-3">
        <button class="btn btn-primary btn-block mb-2" type="submit" form="meetup-edit">Save Changes</button>
      </form>

      <hr class="mb-3">

      <!-- Background Image -->
      <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
        <div class="input-group mb-3">
          <div class="custom-file">
            <input type="file" name="meetupImage" id="meetupImageInput" class="custom-file-input" accept="image/*">
            <label for="meetupImageInput" class="custom-file-label">Upload an Image</label>

          </div>
          <div class="input-group-append">
            <button id="imageUploadBtn" class="btn btn-primary" type="submit" disabled>Upload</button>
          </div>
        </div>
      </form>

    </div>



    <!-- Guest List -->

    <div class="root"></div>

    <div class="col-md-4 order-md-2 mb-4">
      <h4 class="d-flex justify-content-between align-items-center mb-3">
        <span class="text-muted">Guest List</span>
        <span class="badge badge-secondary badge-pill">2</span>
      </h4>
      <ul class="list-group mb-3">
        <li class="list-group-item d-flex justify-content-between lh-condensed">
          <div>
            <h6 class="my-0">Aimee Mann</h6>
          </div>
          <strong class="text-success">&#10004;</strong>
        </li>

        <li class="list-group-item d-flex justify-content-between lh-condensed">
          <div>
            <h6 class="my-0">Jeremy Tronet</h6>
          </div>
          <strong class="text-success">&#10004;</strong>
        </li>


      </ul>

      <form class="card p-2 mb-2" method="POST" action="/addguest">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Guest email">
          <div class="input-group-append">
            <button type="submit" class="btn btn-secondary">Add</button>
          </div>
        </div>
      </form>

      <button class="btn btn-secondary">Send invitations to new guests</button>

    </div>
  </div>
</div>
</form>

<%- include('partials/scripts') %>
<!-- de-activates "upload" button before an image is selected -->
<!-- de-activates "browse" if there are unsaved changes -->
<script src="edit.js" type="text/javascript"> </script>

<%- include('partials/footer') %>