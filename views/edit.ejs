<%- include('partials/header') %>

<style>
  body {
    background-image: url("/images/<%= meetup._id %>");
    background-size: cover;
    color: white;
  }
</style>

<div class="overlay"></div>

<div class="container">
  <div class="py-5 text-center">
    <h1>Edit Event</h1>
    <h3 class="text-danger"><strong><%= message %></strong></h3>
  </div>

  <div class="row">
    <!-- Event Details -->
    <div class="col-md-8 order-md-1">
      <h3 className="d-flex justify-content-between align-items-center mb-3">
        Event Details
      </h3>
      <div id="details-edit"></div>

      <!-- Background Image -->
      <form id="upload-form" action="/events/<%=meetup._id%>/image" method="post" enctype="multipart/form-data">
        <div class="input-group mb-3">
          <div class="custom-file">
            <input type="file" name="meetupImage" id="meetupImageInput" class="custom-file-input" accept="image/*">
            <label for="meetupImageInput" class="custom-file-label">Upload an Image</label>

          </div>
          <div class="input-group-append">
            <button id="imageUploadBtn" class="btn btn-primary" type="submit" disabled>Upload</button>
          </div>
        </div>
      </form>

    </div>

    <!-- Guest List -->
    <div class="col-md-4 order-md-2 mb-4">
      <div id="guest-list"></div>
    </div>

  </div>
</div>

<%- include('partials/scripts') %>
<!-- de-activates "upload" button before an image is selected -->
<!-- de-activates "browse" if there are unsaved changes -->
<script src="/js/edit.js" type="text/javascript"> </script>

<!-- store the meetup Id in a dom element so scripts can access it -->
<data id="meetup-id" hidden><%= meetup._id %></data>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

<script src="/js/details-edit.js" type="text/jsx"></script>
<script src="/js/guest-list.js" type="text/jsx" id="guest-list-script" meetup-id=<%= meetup._id %>>
</script>

<!-- <script src="guest-list-2.js" type="text/javascript" id="guest-list-script" meetup-id=<%= meetup._id %> > </script> -->

<%- include('partials/footer') %>